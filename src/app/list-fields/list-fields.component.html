<ng-container *ngIf="data | async as data">
<ng-container *ngIf="fields | async as fields">
  <div class="container">
    <div>
      <div class="d-flex justify-content-between border-bottom py-3">
        <h3 class="m-0 d-flex align-items-start">{{data.Name}} <fa-icon role="button" (click)="onEditNameApp()" class="ms-2 fs-6 " title="Editar nombre de aplicacion"
            [icon]="icon.edit"></fa-icon></h3>
        <div>
          <button (click)="onActions('new')" data-bs-toggle="modal" data-bs-target="#confirmModal"  class="btn btn-dark btn-sm me-2 rounded-pill px-3">New Project</button>
          <button (click)="onActions('open')" data-bs-toggle="modal" data-bs-target="#confirmModal"  class="btn btn-dark btn-sm  me-2 rounded-pill px-3">Open Project</button>
          <button (click)="onActions('close')" data-bs-toggle="modal" data-bs-target="#confirmModal"  class="btn btn-dark btn-sm rounded-pill px-3">Close Project</button>
        </div>
        <div>
          <fa-icon title="Download Models" class="fs-5" [icon]="icon.download"></fa-icon>
        </div>
      </div>
      <div class="bg-light mt-3 ">
      <div class="d-flex justify-content-between">
        <div class="d-flex justify-content-start align-items-center">
          <h4 class="position-relative">Fields
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success" style="font-size: 0.6rem;">
              {{fields.length}}
            </span>
          </h4>
          <a class="text-decoration-none fw-bolder ms-3 text-info" style="font-size: 0.9rem;" [routerLink]="['/entities', entityId, 'fields', 'add']">
            New Field
          </a>
        </div>
        <div>
          <button [routerLink]="'/app-detail'" class="btn btn-primary btn-sm">To Back</button>
        </div>
      </div>
        <ng-container *ngIf="fields.length > 0">
          <table class="table table-striped">
            <thead class="bg-secondary " style="position: sticky; top: 5rem;">
              <tr>
                <th>Name</th>
                <th>Display Name</th>
                <th>Type</th>
                <th>Element</th>
                <th>Element Type</th>
                <th>Options Select</th>
                <th>File Type</th>
                <th>Validator</th>
                <th>Value Validator</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let field of fields">
                <td>
                  {{field.Name}}
                </td>
                <td>
                  {{field.DisplayName}}
                </td>
                <td>
                  {{field.Type}}
                </td>
                <td>
                  {{field.DisplayType ? field.DisplayType.Element : "---"}}
                </td>
                <td>
                  {{field.DisplayType?.ElementType ? field.DisplayType?.ElementType : "---"}}
                </td>
                <td>
                  <span *ngIf=" !field.DisplayType?.OptionsSelected">---</span>
                  <span *ngFor="let opt of field.DisplayType?.OptionsSelected" class="d-block"> {{opt ? opt : "---"}}</span>

                </td>
                <td>
                  <span *ngIf=" !field.DisplayType?.FileOptions?.TypeFile">---</span>
                  {{field.DisplayType?.FileOptions?.TypeFile}}
                </td>
                <td>
                  <span *ngIf=" !field.Validators">---</span>
                  <span *ngFor="let validator of field.Validators" class="d-block"> {{validator}}</span>
                </td>
                <td>
                  <span *ngIf=" !field.ValueValidators">---</span>
                  <span *ngFor="let valueValidator of field.ValueValidators" class="d-block"> {{valueValidator}}</span>
                </td>
                <td class="text-end">
                  <span role="button" class="text-info  me-4" [routerLink]="['/entities', entityId, 'fields', field.Id]">Edit</span>
                  <span data-bs-toggle="modal" data-bs-target="#confirmModalDelete"   role="button" class="text-info">Delete</span>
                </td>
              </tr>
            </tbody>
          </table>
        </ng-container>
      </div>
    </div>
  </div>
</ng-container>
</ng-container>
<div class="divider"></div>

 <confirm (action)="actions()" [confirmMessage]="confirmMessage " modalTitle="Alert!!!"></confirm>
 <confirm (action)="deleteEntity()" [id]="'confirmModalDelete'" [confirmMessage]="'Va a eliminar la entidad: '+entityName+ '. Desea Continuar'" modalTitle="Alert!!!"></confirm>
